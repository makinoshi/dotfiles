"OSのクリップボードをレジスタ指定無しで Yank, Put 出来るようにする
set clipboard=unnamed,unnamedplus

" smart line joining with J
set ideajoin

" 検索の改善
set incsearch
set ignorecase
set smartcase
set hlsearch

" 音を出さない
set visualbell
set noerrorbells

" スクロール時のオフセット
set scrolloff=10

" NERDTreeのキーバインドを有効にする
" https://github.com/JetBrains/ideavim/blob/master/doc/NERDTree-support.md
set NERDTree

" ヤンクしたときにハイライト
set highlightedyank

" 範囲選択して S のあと囲みたい記号を入力
set surround

" キーのサジェスチョンを出す
" set which-key
set notimeout

" 基本のキーバインドを自然にする
noremap j gj
noremap k gk
noremap gj j
noremap gk k
noremap Y y$
noremap H ^
noremap L $
" noremap w [w
" noremap b [b

"vvで行末まで選択
vnoremap v ^$h

"ノーマルモード中にEnterで改行
noremap <CR> i<CR><Esc>

" xでデフォルトレジスタに入れない
noremap x "_x

"インサートモードで bash 風キーマップ
inoremap <C-a> <C-o>^
inoremap <C-e> <C-o>$<Right>
inoremap <C-b> <Left>
inoremap <C-f> <Right>
inoremap <C-n> <Down>
inoremap <C-p> <Up>
inoremap <C-h> <BS>
inoremap <C-d> <Del>
inoremap <C-k> <C-o>D<Right>
inoremap <C-u> <C-o>d^
inoremap <C-w> <C-o>db

" ESCを代替
inoremap jk <ESC>

" ESC ESC でハイライトを消す
noremap <Esc><Esc> :nohlsearch<CR><ESC>

" 戻る進むはIntelliJのアクションを使う
noremap <C-o> :<C-u>action Back<CR>
noremap <C-i> :<C-u>action Forward<CR>

" / をIntellijの検索に使う
noremap / :action Find<CR>

" quick doc
noremap gh :action QuickJavaDoc<CR>
" パラメーターヒント
noremap gp :action ParameterInfo<CR>
" シンボルにジャンプ
noremap gs :action GotoSymbol<CR>
" アウトライン
noremap go :action ActivateStructureToolWindow<CR>
" 使用箇所を表示
noremap gr :action ShowUsages<CR>
noremap gR :action FindUsages<CR>

" ブックマーク
nnoremap mm :action ActivateBookmarksToolWindow<CR>
nnoremap mt :action ToggleBookmark<CR>
nnoremap mn :action GotoNextBookmark<CR>
nnoremap mp :action GotoPreviousBookmark<CR>

" タブの移動
nmap [b <Action>(PreviousTab)
nmap ]b <Action>(NextTab)

" Gitの変更箇所にジャンプ
nmap [c <Action>(VcsShowPrevChangeMarker)
nmap ]c <Action>(VcsShowNextChangeMarker)

" エラー箇所にジャンプ
nnoremap [e :<C-u>action GotoPreviousError<CR>
nnoremap ]e :<C-u>action GotoNextError<CR>

" メソッドの移動
nnoremap [m :<C-u>action MethodUp<CR>
nnoremap ]m :<C-u>action MethodDown<CR>

" leader key
let mapleader = ' '

" 検索系のleader操作
noremap <leader><leader> :action GotoAction<CR>
noremap <leader>/ :action FindInPath<CR>

" ファイル操作系のleader操作
noremap <leader>ff :action GotoFile<CR>
noremap <leader>fs :action SaveAll<CR>
" .ideavimrc を開く
noremap <leader>fed :edit ~/.ideavimrc<cr>
" .ideavimrc をリロード
noremap <leader>feR :source ~/.ideavimrc<cr>:nohlsearch<cr>

" バッファ操作系のleader操作
noremap <leader>== :action ReformatCode<CR>
noremap <leader>bb :action RecentFiles<CR>
noremap <leader>bd :action CloseContent<CR>
noremap <leader>bh :action MoveEditorToOppositeTabGroup<CR>
noremap <leader>bl :action MoveEditorToOppositeTabGroup<CR>

" 実行
noremap <leader>cc :action ChooseRunConfiguration<CR>

" 移動系
nnoremap <leader>j :action AceAction<CR>

" <leader>g はGit関連の操作
noremap <leader>gs :action CheckinProject<CR>
noremap <leader>gl :action Vcs.Show.Log<CR>

" プロジェクト系
nnoremap <leader>pp :action $LRU<CR>

" リファクタリング
noremap <leader>rr :action Refactorings.QuickListPopupAction<CR>
noremap <leader>re :action RenameElement<CR>
noremap <leader>ri :action OptimizeImports<CR>

" リスタート
nnoremap <leader>qr :action RestartIde<CR>
" 閉じる
nnoremap <leader>qq :action CloseProject<CR>

" ターミナル
nnoremap <leader>' :action ActivateTerminalToolWindow<CR>

" Window系
nnoremap <leader>w/ :action SplitVertically<CR>
nnoremap <leader>w- :action SplitHorizontally<CR>
nnoremap <leader>ww <C-w>w
nnoremap <leader>wa :action UnsplitAll<CR>
nnoremap <leader>wj <C-w>j
nnoremap <leader>wk <C-w>k
nnoremap <leader>wh <C-w>h
nnoremap <leader>wl <C-w>l
nnoremap <leader>w[ :action StretchSplitToLeft<CR>
nnoremap <leader>w] :action StretchSplitToRight<CR>
